server.port=8085
spring.cloud.compatibility-verifier.enabled=false
eureka.client.service-url.defaultZone=${EUREKA_SERVICE_URL:http://localhost:8761}/eureka/

# Application name
spring.application.name=resource-processor

## RabbitMQ connection
#spring.rabbitmq.host=${RABBITMQ_HOST:rabbitmq}
#spring.rabbitmq.port=${RABBITMQ_PORT:5672}
#spring.rabbitmq.username=${RABBITMQ_USERNAME:guest}
#spring.rabbitmq.password=${RABBITMQ_PASSWORD:guest}

# Cloud Function
spring.cloud.function.definition=resourceEvent

# Cloud Stream binding
spring.cloud.stream.bindings.resourceEvent-in-0.destination=resourceEvent
spring.cloud.stream.bindings.resourceEvent-in-0.group=resource-service-group
spring.cloud.stream.bindings.resourceEvent-in-0.content-type=application/json

# Rabbit-specific binding options
spring.cloud.stream.rabbit.bindings.resourceEvent-in-0.consumer.exchange=${RESOURCE_EXCHANGE:resource.exchange}
spring.cloud.stream.rabbit.bindings.resourceEvent-in-0.consumer.exchangeType=topic
spring.cloud.stream.rabbit.bindings.resourceEvent-in-0.consumer.bindingRoutingKey=${RESOURCE_ROUTING_KEY:resource.key}
spring.cloud.stream.rabbit.bindings.resourceEvent-in-0.consumer.autoBind=true
spring.cloud.stream.rabbit.bindings.resourceEvent-in-0.consumer.autoDeclare=true
spring.cloud.stream.rabbit.bindings.resourceEvent-in-0.consumer.autoBindDlq=true
spring.cloud.stream.rabbit.bindings.resourceEvent-in-0.consumer.republishToDlq=true

# Rabbit binder configuration
spring.cloud.stream.rabbit.binder.hosts=${RABBITMQ_HOST:rabbitmq}
spring.cloud.stream.rabbit.binder.port=${RABBITMQ_PORT:5672}
spring.cloud.stream.rabbit.binder.username=${RABBITMQ_USERNAME:guest}
spring.cloud.stream.rabbit.binder.password=${RABBITMQ_PASSWORD:guest}

resource.service.name=resource-service
song.service.name=song-service
